<div class="d-flex align-items-center justify-content-center vh-100">
  <div class="card shadow-lg p-4" style="min-width: 350px; max-width: 400px; width: 100%;">
    <h1 class="h3 mb-2">{{ appState.appTitle }}</h1>
    <p class="lead mb-4">Simple User CRUD App</p>

    <ul class="nav nav-tabs mb-3" id="authTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button"
          role="tab">
          Login
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button"
          role="tab">
          Register
        </button>
      </li>
    </ul>

    <div class="tab-content" id="authTabContent">

      <!-- Login Tab -->
      <div class="tab-pane fade show active" id="login" role="tabpanel">
        <form (ngSubmit)="onLogin()" #loginForm="ngForm" novalidate>
          <div class="mb-3">
            <label for="loginEmail" class="form-label">Email address</label>
            <input
              type="email" class="form-control" id="loginEmail"
              name="email"
              [(ngModel)]="email"
              #loginEmailRef="ngModel"
              required
              [class.is-invalid]="loginEmailRef.invalid && (loginEmailRef.dirty || loginEmailRef.touched)"
            >
            <div class="invalid-feedback">
              Please enter a valid email address.
            </div>
          </div>

          <div class="mb-3">
            <label for="loginPassword" class="form-label">Password</label>
            <input
              type="password" class="form-control" id="loginPassword"
              name="password"
              [(ngModel)]="password"
              #loginPasswordRef="ngModel"
              required
              [class.is-invalid]="loginPasswordRef.invalid && (loginPasswordRef.dirty || loginPasswordRef.touched)"
            >
            <div class="invalid-feedback">
              Password is required.
            </div>
          </div>

          <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
          <button type="submit" class="btn btn-primary w-100" [disabled]="loginForm.invalid">Login</button>
        </form>
      </div>

      <!-- Register Tab -->
      <div class="tab-pane fade" id="register" role="tabpanel">
        <form (ngSubmit)="onRegister()" #registerForm="ngForm" novalidate>
          <div class="mb-3">
            <label for="firstName" class="form-label">First Name</label>
            <input type="text" class="form-control" id="firstName"
                  name="firstName"
                  [(ngModel)]="firstName"
                  #firstNameRef="ngModel"
                  required
                  [class.is-invalid]="firstNameRef.invalid && (firstNameRef.dirty || firstNameRef.touched)">
            <div class="invalid-feedback">First name is required.</div>
          </div>

          <div class="mb-3">
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text" class="form-control" id="lastName"
                  name="lastName"
                  [(ngModel)]="lastName"
                  #lastNameRef="ngModel"
                  required
                  [class.is-invalid]="lastNameRef.invalid && (lastNameRef.dirty || lastNameRef.touched)">
            <div class="invalid-feedback">Last name is required.</div>
          </div>

          <div class="mb-3">
            <label for="dob" class="form-label">Date of Birth</label>
            <input type="date" class="form-control" id="dob"
                  name="dateOfBirth"
                  [(ngModel)]="dateOfBirth"
                  #dobRef="ngModel"
                  required
                  [class.is-invalid]="dobRef.invalid && (dobRef.dirty || dobRef.touched)">
            <div class="invalid-feedback">Date of birth is required.</div>
          </div>

          <div class="mb-3">
            <label for="registerEmail" class="form-label">Email address</label>
            <input type="email" class="form-control" id="registerEmail"
                  name="regEmail"
                  [(ngModel)]="regEmail"
                  #regEmailRef="ngModel"
                  required
                  pattern="^(?!.*\.\.)([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$"
                  [class.is-invalid]="regEmailRef.invalid && (regEmailRef.dirty || regEmailRef.touched)">
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>

          <div class="mb-3">
            <label for="registerPassword" class="form-label">Password</label>
            <input type="password" class="form-control" id="registerPassword"
                  name="regPassword"
                  [(ngModel)]="regPassword"
                  #regPasswordRef="ngModel"
                  required minlength="6"
                  [class.is-invalid]="regPasswordRef.invalid && (regPasswordRef.dirty || regPasswordRef.touched)">
            <div class="invalid-feedback">
              Password is required (minimum 6 characters).
            </div>
          </div>

          <div class="mb-3">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="confirmPassword"
                  name="confirmPassword"
                  [(ngModel)]="regConfirmPassword"
                  #regConfirmPasswordRef="ngModel"
                  required
                  [class.is-invalid]="(regConfirmPasswordRef.dirty || regConfirmPasswordRef.touched) && regConfirmPassword !== regPassword">
            <div class="invalid-feedback">
              Passwords must match.
            </div>
          </div>

          <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
          <button type="submit" class="btn btn-primary w-100"
                  [disabled]="registerForm.invalid || regPassword !== regConfirmPassword">
            Create Account
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
